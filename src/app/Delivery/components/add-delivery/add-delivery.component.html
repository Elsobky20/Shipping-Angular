<div class="container my-5">
  <div class="card shadow-lg p-4 rounded-4">
    <h2 class="mb-4 text-center text-primary fw-bold">
      {{ mode === 'add' ? 'Add New Delivery' : 'Edit Delivery' }}
    </h2>

    <form [formGroup]="deliveryForm" (ngSubmit)="onSubmit()" novalidate>
      <div class="row">
        <!-- Name -->
        <div class="mb-3 col-md-6">
          <label for="name" class="form-label">Name</label>
          <input id="name" type="text" formControlName="name" class="form-control" [class.is-invalid]="isInvalid('name')" />
          <div *ngIf="isInvalid('name')" class="invalid-feedback">
            Name is required and must be 3-10 characters long.
          </div>
        </div>

        <!-- Email -->
        <div class="mb-3 col-md-6">
          <label for="email" class="form-label">Email</label>
          <input id="email" type="email" formControlName="email" class="form-control" [class.is-invalid]="isInvalid('email')" />
          <div *ngIf="isInvalid('email')" class="invalid-feedback">
            Please enter a valid email.
          </div>
        </div>

        <!-- Phone -->
        <div class="mb-3 col-md-6">
          <label for="phone" class="form-label">Phone</label>
          <input id="phone" type="text" formControlName="phone" class="form-control" [class.is-invalid]="isInvalid('phone')" />
          <div *ngIf="isInvalid('phone')" class="invalid-feedback">
            Please enter a valid Egyptian phone number.
          </div>
        </div>

        <!-- Password -->
        <div class="mb-3 col-md-6">
          <label for="password" class="form-label">Password</label>
          <input id="password" type="password" formControlName="password" class="form-control" [class.is-invalid]="isInvalid('password')" />
          <div *ngIf="isInvalid('password')" class="invalid-feedback">
            Password must be at least 6 characters.
          </div>
        </div>

        <!-- Address -->
        <div class="mb-3 col-md-6">
          <label for="address" class="form-label">Address</label>
          <input id="address" type="text" formControlName="address" class="form-control" [class.is-invalid]="isInvalid('address')" />
          <div *ngIf="isInvalid('address')" class="invalid-feedback">
            Address is required.
          </div>
        </div>

        <!-- Branch -->
        <div class="mb-3 col-md-6">
          <label for="branchId" class="form-label">Branch</label>
          <select id="branchId" formControlName="branchId" (change)="onBranchChange($event)" class="form-select" [class.is-invalid]="isInvalid('branchId')">
            <option value="">Select Branch</option>
            <option *ngFor="let branch of branches" [value]="branch.id">{{ branch.name }}</option>
          </select>
          <div *ngIf="isInvalid('branchId')" class="invalid-feedback">
            Please select a branch.
          </div>
        </div>

   
                <!-- Governments -->
                <div class="mb-3 col-md-6">
                  <label for="governmentsId" class="form-label">Governments</label>
                  <select id="governmentsId" formControlName="governmentsId" class="form-select" multiple [class.is-invalid]="isInvalid('governmentsId')">
                    <option *ngFor="let gov of governments" [value]="gov.id">{{ gov.name }}</option>
                  </select>
                  <div *ngIf="isInvalid('governmentsId')" class="invalid-feedback">
                    Please select at least one government.
                  </div>
                </div>

        <!-- Company Percentage -->
        <div class="mb-3 col-md-6">
          <label for="companyPercentage" class="form-label">Company Percentage</label>
          <input id="companyPercentage" type="number" formControlName="companyPercentage" class="form-control" [class.is-invalid]="isInvalid('companyPercentage')" />
          <div *ngIf="isInvalid('companyPercentage')" class="invalid-feedback">
            Company percentage is required.
          </div>
        </div>
      </div>

           <!-- Discount Type -->
        <div class="mb-3 col-md-6">
          <label for="discountType" class="form-label">Discount Type</label>
          <select id="discountType" formControlName="discountType" class="form-select" [class.is-invalid]="isInvalid('discountType')">
            <option value="">Select Discount Type</option>
            <option value="Fixed">Fixed</option>
            <option value="Percentage">Percentage</option>
          </select>
          <div *ngIf="isInvalid('discountType')" class="invalid-feedback">
            Please select a discount type.
          </div>
        </div>

      <!-- Submit Button -->
      <div class="d-grid mt-3">
        <button 
        type="submit" 
        class="btn btn-primary w-100" 
        [disabled]="loading">
        {{ loading ? 'Please wait...' : (mode === 'add' ? 'Add Delivery' : 'Update Delivery') }}
      </button>

      </div>
    </form>
  </div>
</div>
